<div class="card mb-4">
  <div class="card-header">
    <i class="fas fa-table me-1"></i>
    List of users
  </div>
  <div class="card-body">
    <div class="mb-3">
      <button class="btn btn-primary" (click)="toggleForm()">
        <i class="fas fa-user-plus"></i> Add User
      </button>
    </div>

    <div *ngIf="showForm || showUpdateForm">
      <form *ngIf="showForm && !selectedUser" [formGroup]="userForm" (ngSubmit)="addUser()">
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" id="username" class="form-control" formControlName="nomUtilisateur">
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" class="form-control" formControlName="email">
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" class="form-control" formControlName="password">
        </div>

        <div class="form-group">
          <label for="role">Role</label>
          <input type="text" id="role" class="form-control" formControlName="roleDutilisateur">
        </div>

        <div class="form-group">
          <label for="info">Informations</label>
          <input type="text" id="info" class="form-control" formControlName="InformationsPersonalises">
        </div>

        <button type="submit" class="btn btn-primary">Submit</button>
      </form>

      <!-- In your HTML -->
      <form *ngIf="showUpdateForm && selectedUser" [formGroup]="updateUserForm" (ngSubmit)="updateUser()">
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" id="username" class="form-control" formControlName="nomUtilisateur">
        </div>

        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" class="form-control" formControlName="email">
        </div>

        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" class="form-control" formControlName="password">
        </div>

        <div class="form-group">
          <label for="role">Role</label>
          <input type="text" id="role" class="form-control" formControlName="roleDutilisateur">
        </div>

        <div class="form-group">
          <label for="info">Informations</label>
          <input type="text" id="info" class="form-control" formControlName="InformationsPersonalises">
        </div>

        <button type="submit" class="btn btn-primary">Update</button>
      </form>
    </div>


    <table *ngIf="!showForm" id="datatablesSimple" class="table table-bordered">
      <thead>
      <tr>
        <th>Id</th>
        <th>Username</th>
        <th>Email</th>
        <th>Role</th>
        <th>Informations</th>
        <th>Update</th>
        <th>Delete</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let user of users">
        <td>{{ user.utilisateurId }}</td>
        <td>{{ user.nomUtilisateur }}</td>
        <td>{{ user.email }}</td>
        <td>{{ user.roleDutilisateur }}</td>
        <td>{{ user.InformationsPersonalises }}</td>
        <!-- Inside the *ngFor loop where you display users -->
        <td>
          <button class="btn btn-sm btn-info" (click)="toggleForm(user)">
            <i class="fas fa-pencil-alt"></i>
          </button>
        </td>

        <td>
          <button class="btn btn-sm btn-danger" (click)="deleteUser(user.utilisateurId)">
            <i class="fas fa-trash"></i>
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
